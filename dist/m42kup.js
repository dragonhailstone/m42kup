var m42kup=function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){var n=r(1),a=r(2);var o={parser:n,converter:a,render:function(t,e){var r=n.generateParseTreeFromInput(t),o=n.generateASTFromParseTree(r);return a.convert(o,e)}};t.exports=o},function(t,e){t.exports={generateParseTreeFromInput:function(t){var e={levels:[],stack:[]};function r(r){if("text"==r.type&&e.stack.length&&"text"==e.stack[e.stack.length-1].type){var n=e.stack.pop();r={type:"text",start:n.start,end:r.end,data:n.data+r.data}}if("right boundary marker"==r.type){for(var a=[r];;){if(!(i=e.stack.pop()))throw new Error("No lbm found");if(a.unshift(i),"left boundary marker"==i.type&&i.level==r.level)break}var o=a[0].start,l=a[a.length-1].end;r={type:"element",start:o,end:l,data:t.substring(o,l),children:a}}if("right verbatim marker"==r.type){var i;for(a=[r];;){if(!(i=e.stack.pop()))throw new Error("No lvm found");if(a.unshift(i),"left verbatim marker"==i.type&&i.level==r.level)break}var s=a[0].start,u=a[a.length-1].end;r={type:"verbatim",start:s,end:u,data:t.substring(s,u),children:a}}e.stack.push(r)}for(var n=0;n<t.length;)if("`"==t[n]){var a=n;for(n++;n<t.length&&"`"==t[n];n++);var o=n;r({type:"left verbatim marker",start:a,end:o,data:t.substring(a,o),level:o-a}),e.levels.push(-(o-a));var l,i,s=!1;for(n++;n<t.length;n++)if("`"==t[n]){var u=n;for(n++;n<t.length&&"`"==t[n];n++);var p=n;if(p-u==o-a){s=!0,[l,i]=[u,p];break}}r({type:"text",start:w=o,end:$=s?l:n,data:t.substring(w,$)}),s&&(r({type:"right verbatim marker",start:l,end:i,data:t.substring(l,i),level:i-l}),e.levels.pop())}else if("["==t[n]){var h=n;for(n++;n<t.length&&"["==t[n];n++);var d=n;if(d-h<(y=e.levels[e.levels.length-1]||0)){r({type:"text",start:h,end:d,data:t.substring(h,d)});continue}e.levels.push(d-h),r({type:"left boundary marker",start:h,end:d,data:t.substring(h,d),level:d-h});var f=n,c=f+t.substring(f).match(/^(?:(?:\*{1,3}|={1,6}|\${1,2}|;{1,3}|[!"#$%&')*+,\-.\/;<=>?@\\^_`{}~]|[a-z][a-z0-9]*)|)/i)[0].length;r({type:"tag name",start:f,end:c,data:t.substring(f,c)});var m=n=c,v=m+t.substring(m).match(/^(?:[ \t|]|)/i)[0].length;r({type:"separator",start:m,end:v,data:t.substring(m,v)}),n=v}else if("]"==t[n]){var y;if(0==(y=e.levels[e.levels.length-1]||0)){var g=n;for(n++;n<t.length&&"]"==t[n];n++);var b=n;r({type:"mismatched right boundary marker",start:g,end:b,data:t.substring(g,b)});continue}var x=n;for(n++;n-x<y&&n<t.length&&"]"==t[n];n++);var k=n;if(k-x<y){r({type:"text",start:x,end:k,data:t.substring(x,k)});continue}r({type:"right boundary marker",start:x,end:k,data:t.substring(x,k),level:k-x}),e.levels.pop()}else{var $,w=n;for(n++;n<t.length&&!["[","]","`"].includes(t[n]);n++);r({type:"text",start:w,end:$=n,data:t.substring(w,$)})}for(var E=e.levels.length-1;E>=0;E--){var T=e.levels[E]>0?"right boundary marker":"right verbatim marker",S=e.levels[E]>0?e.levels[E]:-e.levels[E];r({type:T,start:t.length,end:t.length,data:"",level:S})}return e.stack},generateASTFromParseTree:function(t){return function t(e){return e.map(e=>{switch(e.type){case"text":return{type:"text",text:e.data};case"verbatim":return{type:"text",text:e.children[1].data};case"element":return{type:"element",name:e.children[1].data,code:e.data,children:t(e.children.slice(3,-1))};case"mismatched right boundary marker":return{type:"error",text:e.data};default:throw new TypeError(`Unknown type: ${e.type}`)}})}(t)}}},function(t,e){var r=t=>({type:"text",text:t}),n=t=>({type:"html",html:t}),a=t=>`<code class="m42kup-error">${o(t)}</code>`,o=t=>t.replace(/[&<>"']/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[t]),l=t=>{if("html"==t.type)return t;if("text"==t.type)return n(o(t.text));if("error"==t.type)return n(a(t.text));throw new TypeError(`Cannot convert type ${t.type} to HTML`)},i=(...t)=>e=>(t.forEach(t=>e=t(e)),e),s={lbrack:t=>{if(t.text||t.html)throw new Error("Input to void element");return r("[")},rbrack:t=>{if(t.text||t.html)throw new Error("Input to void element");return r("]")},grave:t=>{if(t.text||t.html)throw new Error("Input to void element");return r("`")},comment:t=>r(""),entity:t=>{if("text"!=t.type)throw new TypeError("Non-text input");if(!/^([a-z]{1,50}|#[0-9]{1,10}|#x[0-9a-f]{1,10})$/i.test(t.text))throw new SyntaxError("Invalid value");return n(`&${t.text};`)}};["b","blockquote","code","i","u","h1","h2","h3","h4","h5","h6","p","sup","sub"].forEach(t=>s[t]=i(l,e=>n(`<${t}>${e.html}</${t}>`))),s.blockcode=i(l,t=>n(`<pre><code>${t.html}</code></pre>`)),s.bi=i(s.b,s.i),["br","hr"].forEach(t=>s[t]=i(l,e=>n(`<${t}>${e.html}`))),s.link=(t=>{if("text"!=t.type)throw new TypeError("Non-text input");return/^(http:\/\/|https:\/\/)/.test(t.text)||(t.text="http://"+t.text),t=l(t),n(`<a href="${t.html}">${t.html}</a>`)}),["ol","ul","li"].forEach(t=>s[t]=i(l,e=>n(`<${t}>${e.html}</${t}>`))),["table","tr","td","th"].forEach(t=>s[t]=i(l,e=>n(`<${t}>${e.html}</${t}>`))),["squote","dquote"].forEach(t=>s[t]=i(l,e=>{var r={squote:["‘","’"],dquote:["“","”"]};return n(`${r[t][0]}${e.html}${r[t][1]}`)}));var u={'"':"dquote","%":"comment","&":"entity","'":"squote","*":"i","**":"b","***":"bi",";":"code",";;":"blockcode","=":"h1","==":"h2","===":"h3","====":"h4","=====":"h5","======":"h6",">":"blockquote","\\":"br","^":"sup",_:"sub","`":"grave","{":"lbrack","}":"rbrack","~":"link"};for(var p in u){if(!s[u[p]])throw new TypeError(`aliases[${JSON.stringify(p)}] aliases non-existing function ${JSON.stringify(u[p])}`);s[p]=s[u[p]]}t.exports={convert:function(t,e){e||(e={});var r={};for(var o in s)r[o]=s[o];if(e.tags)for(var o in e.tags)if(e.tags[o]instanceof Function)r[o]=e.tags[o];else{if(!1!==e.tags[o])throw new TypeError(`Unsupported value: options.tags[${JSON.stringify(o)}] == ${JSON.stringify(e.tags[o])}`);delete r[o]}s=r;for(var i=t=>{var e;try{if(!(t.name in s)){if(!t.name)throw Error("No tag name");throw Error("Undefined tag name")}t.children=t.children.map(t=>"element"==t.type?i(t):t),t.children.every(t=>"text"==t.type)?t.render={type:"text",text:t.children.map(t=>t.text).join("")}:t.render={type:"html",html:t.children.map(l).map(t=>t.html).join("")},e=s[t.name](t.render)}catch(r){e=n(a(`[${t.name}]: ${r.message}: ${t.code}`))}finally{return e}},u=0;u<t.length;u++)"element"==t[u].type&&(t[u]=i(t[u]));return t.map(l).map(t=>t.html).join("")},text:r,html:n,escapeHtml:o,htmlFilter:l}}]);